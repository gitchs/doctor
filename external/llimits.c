#include "llimits.h"
#include "helper.h"
#include "lauxlib.h"
#include "lua.h"
#include "lualib.h"

#include <limits.h>
#include <stdint.h>

LUAMOD_API int luaopen_limits(lua_State* L) {
  lua_newtable(L);
  // reference: https://cplusplus.com/reference/climits/

  DEFINE_LUA_CONST_INTEGER(L, "CHAR_BIT", CHAR_BIT);
  DEFINE_LUA_CONST_INTEGER(L, "SCHAR_MIN", SCHAR_MIN);
  DEFINE_LUA_CONST_INTEGER(L, "SCHAR_MAX", SCHAR_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "UCHAR_MAX", UCHAR_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "CHAR_MIN", CHAR_MIN);
  DEFINE_LUA_CONST_INTEGER(L, "CHAR_MAX", CHAR_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "MB_LEN_MAX", MB_LEN_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "SHRT_MIN", SHRT_MIN);
  DEFINE_LUA_CONST_INTEGER(L, "SHRT_MAX", SHRT_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "USHRT_MAX", USHRT_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "INT_MIN", INT_MIN);
  DEFINE_LUA_CONST_INTEGER(L, "INT_MAX", INT_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "UINT_MAX", UINT_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "LONG_MIN", LONG_MIN);
  DEFINE_LUA_CONST_INTEGER(L, "LONG_MAX", LONG_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "ULONG_MAX", ULONG_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "LLONG_MIN", LLONG_MIN);
  DEFINE_LUA_CONST_INTEGER(L, "LLONG_MAX", LLONG_MAX);
  DEFINE_LUA_CONST_INTEGER(L, "ULLONG_MAX", ULLONG_MAX);

  return 1;
}
